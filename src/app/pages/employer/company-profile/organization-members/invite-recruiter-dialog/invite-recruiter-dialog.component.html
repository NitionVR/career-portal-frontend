<div *ngIf="isVisible" class="fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm">
  <div class="w-full max-w-lg bg-card p-8 rounded-xl shadow-lg m-4">
    <h2 class="text-2xl font-bold text-foreground mb-2">Invite Recruiters</h2>
    <p class="text-muted-foreground mb-6">Invite recruiters to join your organization. They will receive an email with instructions to create an account.</p>

    <form [formGroup]="inviteForm" class="space-y-4">
      <div formArrayName="emails" class="space-y-3">
        <div *ngFor="let email of emailsArray.controls; let i = index" class="flex items-center gap-2">
          <div class="w-full">
            <label class="block text-sm font-medium text-muted-foreground" for="email-{{i}}">Email address</label>
            <input class="w-full px-4 py-3 bg-background border border-border rounded-md text-foreground focus:ring-0 focus:border-primary focus:shadow-input-focus transition-shadow duration-200"
                   id="email-{{i}}" [formControlName]="i" type="email" placeholder="recruiter@company.com">
            <p *ngIf="emailsArray.controls[i].invalid && emailsArray.controls[i].touched" class="text-destructive text-xs mt-1">Please enter a valid email address</p>
          </div>
          <button type="button" (click)="removeEmailField(i)" [disabled]="emailsArray.length === 1"
                  class="p-2 text-muted-foreground hover:text-destructive focus:outline-none disabled:opacity-50">
            <span class="material-symbols-outlined">delete</span>
          </button>
        </div>
      </div>

      <div class="flex justify-end">
        <button type="button" (click)="addEmailField()" class="px-4 py-2 text-sm font-semibold text-primary-foreground bg-primary rounded-full hover:bg-primary-hover transition-colors flex items-center">
          <span class="material-symbols-outlined mr-2">add</span> Add Another Email
        </button>
      </div>

      <div>
        <label class="block text-sm font-medium text-muted-foreground" for="message">Personal message (optional)</label>
        <textarea class="w-full px-4 py-3 bg-background border border-border rounded-md text-foreground focus:ring-0 focus:border-primary focus:shadow-input-focus transition-shadow duration-200"
                  id="message" formControlName="message" rows="3" placeholder="Add a personal message to your invitation"></textarea>
      </div>
    </form>

    <div class="flex justify-end gap-3 mt-8">
      <button (click)="onCancel()" class="px-6 py-2 text-sm font-semibold text-muted-foreground bg-muted rounded-full hover:bg-muted/80">Cancel</button>
      <button (click)="onSubmit()" [disabled]="inviteForm.invalid" class="px-6 py-2 text-sm font-semibold text-primary-foreground bg-primary rounded-full hover:bg-primary-hover disabled:opacity-50">Send Invitations</button>
    </div>
  </div>
</div>